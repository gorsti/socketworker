<!DOCTYPE HTML>
<title>Websocket worker</title>
<pre id="log">Log:</pre>
<script>
  var worker = new SharedWorker('test.js');
  var log = document.getElementById('log');
  worker.port.addEventListener('message', function(e) {
    log.textContent += '\n' + e.data;
  }, false);
  worker.port.start(); // note: need this when using addEventListener
//  worker.port.postMessage('ping');
  setInterval ( function() {
  	  worker.port.postMessage('ping')
  },1000);
</script>